(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{148:function(e,t,n){var content=n(166);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(57).default)("46e87fe3",content,!0,{sourceMap:!1})},165:function(e,t,n){"use strict";var l=n(148);n.n(l).a},166:function(e,t,n){(t=n(56)(!1)).push([e.i,".zip-upload[data-v-f8f2b718]{display:-webkit-box;display:flex;min-height:300px}.zip-upload__block[data-v-f8f2b718]{padding:10px;width:50%}.zip-upload__block+.zip-upload__block[data-v-f8f2b718]{border-left:2px solid #ccc}.file-list__item.-add[data-v-f8f2b718]{color:#00f}.file-list__item.-change[data-v-f8f2b718]{color:green}.file-list__item.-delete[data-v-f8f2b718]{color:red}",""]),e.exports=t},168:function(e,t,n){"use strict";n.r(t);n(72),n(74),n(105),n(149),n(159),n(160);var l=n(1),o=n(163),r=n(164),f=new Uint8Array([239,187,191]),c=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"download",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",data="text/plain"===n||"text/csv"===n?[f,t]:[t],l=new Blob(data,{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(l,e);else{var element=document.createElement("a");element.href=window.URL.createObjectURL(l),element.setAttribute("download",e),element.click(),window.URL.revokeObjectURL(element.href)}}}]),e}(),d=n(161).Zlib.Unzip,v=n(162).Zlib.Zip;function m(e){var i,t,n=e.length,l=-1,o=[];for(i=0;i<n;++i)(t=e.charCodeAt(i))<=127?o[++l]=t:t<=2047?(o[++l]=192|t>>>6,o[++l]=128|63&t):t<=65535?(o[++l]=224|t>>>12,o[++l]=128|t>>>6&63,o[++l]=128|63&t):(o[++l]=240|t>>>18,o[++l]=128|t>>>12&63,o[++l]=128|t>>>6&63,o[++l]=128|63&t);return o}function h(e){var t,i,n,l,o,r,f;for(t="",n=e.length,i=0;i<n;)switch((l=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(l);break;case 12:case 13:o=e[i++],t+=String.fromCharCode((31&l)<<6|63&o);break;case 14:o=e[i++],r=e[i++],t+=String.fromCharCode((15&l)<<12|(63&o)<<6|(63&r)<<0);break;case 15:o=e[i++],r=e[i++],f=e[i++],t+=String.fromCodePoint((7&l)<<18|(63&o)<<12|(63&r)<<6|63&f)}return t}var _=l.a.extend({data:function(){return{zipFileInfoListA:[],zipFileInfoListB:[]}},computed:{_diffZipFileMap:function(){var e=this,t={};return this.$data.zipFileInfoListA.forEach((function(n){var l=e.$data.zipFileInfoListB.find((function(e){return n.fileName===e.fileName}));l?!function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(n.binaryData,l.binaryData)?t[n.fileName]="change":t[n.fileName]="same":t[n.fileName]="delete"})),this.$data.zipFileInfoListB.filter((function(e){return!t[e.fileName]})).forEach((function(e){t[e.fileName]="add"})),t}},methods:{onUpload:function(e,label){var t=this;if(e.currentTarget.files){var n=e.currentTarget.files[0],l=new FileReader;l.onloadend=function(){if(l.result){var e=new d(new Uint8Array(l.result)),n=e.getFilenames().map((function(t){var n=t.split("").map((function(e){return e.charCodeAt(0)}));return console.log("文字コード：",Encoding.detect(n)),{fileName:h(Encoding.convert(n,"UTF8")),binaryData:e.decompress(t)}}));"A"===label?t.$data.zipFileInfoListA=n:t.$data.zipFileInfoListB=n}},l.readAsArrayBuffer(n)}},onDownloadButtonClick:function(){var e=this,t=new v;this.$data.zipFileInfoListB.filter((function(t){return["add","change"].includes(e._diffZipFileMap[t.fileName])})).forEach((function(e){t.addFile(e.binaryData,{filename:m(e.fileName)})}));var n=t.compress();c.download("sample.zip",n,"application/zip")}}}),w=(n(165),n(23)),component=Object(w.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"zip-upload"},[n("div",{staticClass:"zip-upload__block"},[n("input",{attrs:{type:"file"},on:{change:function(t){e.onUpload(t,"A")}}}),n("ul",{staticClass:"file-list"},[e._l(e.$data.zipFileInfoListA,(function(t){return[n("li",{staticClass:"file-list__item",class:{"-delete":"delete"===e._diffZipFileMap[t.fileName]}},[e._v(e._s(t.fileName))])]}))],2)]),n("div",{staticClass:"zip-upload__block"},[n("input",{attrs:{type:"file"},on:{change:function(t){e.onUpload(t,"B")}}}),n("ul",{staticClass:"file-list"},[e._l(e.$data.zipFileInfoListB,(function(t){return[n("li",{staticClass:"file-list__item",class:{"-add":"add"===e._diffZipFileMap[t.fileName],"-change":"change"===e._diffZipFileMap[t.fileName]}},[e._v(e._s(t.fileName))])]}))],2)])]),n("div",[n("button",{on:{click:e.onDownloadButtonClick}},[e._v("差分ダウンロード")])])])}),[],!1,null,"f8f2b718",null);t.default=component.exports}}]);